###### é¡¹ç›®ç¬”è®°~é«˜ä»¿ç½‘æ˜“äº‘~

# Vant2 ç§»åŠ¨ç«¯ UI ç»„ä»¶åº“[^Vant 2]

## å®‰è£…

### é€šè¿‡ npm å®‰è£…

> åœ¨ç°æœ‰é¡¹ç›®ä¸­ä½¿ç”¨ Vant æ—¶ï¼Œå¯ä»¥é€šè¿‡ `npm` æˆ– `yarn` è¿›è¡Œå®‰è£…ï¼š

```bash
# Vue 3 é¡¹ç›®ï¼Œå®‰è£…æœ€æ–°ç‰ˆ Vantï¼š
npm i vant -S

# Vue 2 é¡¹ç›®ï¼Œå®‰è£… Vant 2ï¼š
npm i vant@latest-v2 -S
```

### é€šè¿‡ CDN å®‰è£…

ä½¿ç”¨ Vant æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨ html æ–‡ä»¶ä¸­å¼•å…¥ CDN é“¾æ¥ï¼Œä¹‹åä½ å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ `vant` è®¿é—®åˆ°æ‰€æœ‰ç»„ä»¶ã€‚

```html
<!-- å¼•å…¥æ ·å¼æ–‡ä»¶ -->
<link rel="stylesheet" href="https://unpkg.com/vant@2.12/lib/index.css" />

<!-- å¼•å…¥ Vue å’Œ Vant çš„ JS æ–‡ä»¶ -->
<script src="https://unpkg.com/vue@2.6/dist/vue.min.js"></script>
<script src="https://unpkg.com/vant@2.12/lib/vant.min.js"></script>

<script>
  // åœ¨ #app æ ‡ç­¾ä¸‹æ¸²æŸ“ä¸€ä¸ªæŒ‰é’®ç»„ä»¶
  new Vue({
    el: '#app',
    template: `<van-button>æŒ‰é’®</van-button>`,
  });

  // è°ƒç”¨å‡½æ•°ç»„ä»¶ï¼Œå¼¹å‡ºä¸€ä¸ª Toast
  vant.Toast('æç¤º');

  // é€šè¿‡ CDN å¼•å…¥æ—¶ä¸ä¼šè‡ªåŠ¨æ³¨å†Œ Lazyload ç»„ä»¶
  // å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ‰‹åŠ¨æ³¨å†Œ
  Vue.use(vant.Lazyload);
</script>
```

#### å…è´¹ CDN

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å…è´¹ CDN æœåŠ¡æ¥ä½¿ç”¨ Vant:

- [jsdelivr](https://www.jsdelivr.com/package/npm/vant)
- [cdnjs](https://cdnjs.com/libraries/vant)
- [unpkg](https://unpkg.com/)

æ³¨æ„ï¼šå…è´¹ CDN ä¸€èˆ¬ç”¨äºåˆ¶ä½œåŸå‹æˆ–ä¸ªäººå°å‹é¡¹ç›®ï¼Œä¸æ¨èåœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å…è´¹ CDNã€‚

å¯¹äºä¼ä¸šå¼€å‘è€…ï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

- é€šè¿‡ npm å¼•å…¥ï¼Œå¹¶é€šè¿‡æ„å»ºå·¥å…·è¿›è¡Œæ‰“åŒ…
- ä¸‹è½½å¯¹åº”æ–‡ä»¶ï¼Œå¹¶æ‰˜ç®¡åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨æˆ– CDN ä¸Š

### é€šè¿‡è„šæ‰‹æ¶å®‰è£…

åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ Vant æ—¶ï¼Œæ¨èä½¿ç”¨ Vue å®˜æ–¹æä¾›çš„è„šæ‰‹æ¶ [Vue Cli](https://cli.vuejs.org/zh/) åˆ›å»ºé¡¹ç›®å¹¶å®‰è£… Vantã€‚

```bash
# å®‰è£… Vue Cli
npm install -g @vue/cli

# åˆ›å»ºä¸€ä¸ªé¡¹ç›®
vue create hello-world

# åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤æ‰“å¼€å›¾å½¢åŒ–ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º
vue ui
```

![img](https://img01.yzcdn.cn/vant/vue-cli-demo-201809032000.png)

åœ¨å›¾å½¢åŒ–ç•Œé¢ä¸­ï¼Œç‚¹å‡» `ä¾èµ–` -> `å®‰è£…ä¾èµ–`ï¼Œç„¶åå°† `vant` æ·»åŠ åˆ°ä¾èµ–ä¸­å³å¯ã€‚

## å¼•å…¥ç»„ä»¶

### æ–¹å¼ä¸€. è‡ªåŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶ (æ¨è)

[babel-plugin-import](https://github.com/ant-design/babel-plugin-import) æ˜¯ä¸€æ¬¾ babel æ’ä»¶ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°† import çš„å†™æ³•è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‰éœ€å¼•å…¥çš„æ–¹å¼ã€‚

```bash
# å®‰è£…æ’ä»¶
npm i babel-plugin-import -D
```
```js
// åœ¨.babelrc ä¸­æ·»åŠ é…ç½®
// æ³¨æ„ï¼šwebpack 1 æ— éœ€è®¾ç½® libraryDirectory
{
  "plugins": [
    ["import", {
      "libraryName": "vant",
      "libraryDirectory": "es",
      "style": true
    }]
  ]
}

// å¯¹äºä½¿ç”¨ babel7 çš„ç”¨æˆ·ï¼Œå¯ä»¥åœ¨ babel.config.js ä¸­é…ç½®
module.exports = {
  plugins: [
    ['import', {
      libraryName: 'vant',
      libraryDirectory: 'es',
      style: true
    }, 'vant']
  ]
};
```

```js
// æ¥ç€ä½ å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥å¼•å…¥ Vant ç»„ä»¶
// æ’ä»¶ä¼šè‡ªåŠ¨å°†ä»£ç è½¬åŒ–ä¸ºæ–¹å¼äºŒä¸­çš„æŒ‰éœ€å¼•å…¥å½¢å¼
import { Button } from 'vant';
```

> Tips:
>
> 1. å¦‚æœä½ åœ¨ä½¿ç”¨ TypeScriptï¼Œå¯ä»¥ä½¿ç”¨ [ts-import-plugin](https://github.com/Brooooooklyn/ts-import-plugin) å®ç°æŒ‰éœ€å¼•å…¥ã€‚
> 2. æ­¤å¤–æŒ‰éœ€å¼•å…¥åéœ€è¦é‡å¯é¡¹ç›®æ‰èƒ½ä½¿æ ·å¼ç”Ÿæ•ˆã€‚

### æ–¹å¼äºŒ. æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶

åœ¨ä¸ä½¿ç”¨æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨å¼•å…¥éœ€è¦çš„ç»„ä»¶ã€‚

```js
import Button from 'vant/lib/button';
import 'vant/lib/button/style';
```

### æ–¹å¼ä¸‰. å¯¼å…¥æ‰€æœ‰ç»„ä»¶

Vant æ”¯æŒä¸€æ¬¡æ€§å¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œå¼•å…¥æ‰€æœ‰ç»„ä»¶ä¼šå¢åŠ ä»£ç åŒ…ä½“ç§¯ï¼Œå› æ­¤ä¸æ¨èè¿™ç§åšæ³•ã€‚

```js
import Vue from 'vue';
import Vant from 'vant';
import 'vant/lib/index.css';

Vue.use(Vant);
```

> Tips: é…ç½®æŒ‰éœ€å¼•å…¥åï¼Œå°†ä¸å…è®¸ç›´æ¥å¯¼å…¥æ‰€æœ‰ç»„ä»¶ã€‚

## ä½¿ç”¨

> å‚è€ƒå®˜ç½‘[^Vant 2]



[^Vant 2]:[Vant 2 - è½»é‡ã€å¯é çš„ç§»åŠ¨ç«¯ç»„ä»¶åº“ (gitee.io)](https://vant-contrib.gitee.io/vant/v2/#/zh-CN/)

# ç½‘éŸ³ä¹æ¥å£[^ç½‘æ˜“äº‘éŸ³ä¹APIæ–‡æ¡£]

###### æ¨èéŸ³ä¹

http://iwenwiki.com:3000/personalized?limit=6

è¯·æ±‚ç±»å‹ï¼š`get`

å¯é€‰å‚æ•°ï¼š`limit`å–å‡ºæ•°é‡ï¼Œé»˜è®¤ä¸º30

æ¥å£åœ°å€ï¼š`/personalized`

http://iwenwiki.com:3000/toplist/detail

###### æ‰€æœ‰æ¦œå•æ¥å£(`get`)

http://iwenwiki.com:3000/toplist

###### æ­Œå•è¯¦æƒ…æ¥å£(`get`)

http://iwenwiki.com:3000/playlist/detail

- è¯´æ˜ : æ­Œå•èƒ½çœ‹åˆ°æ­Œå•åå­—, ä½†çœ‹ä¸åˆ°å…·ä½“æ­Œå•å†…å®¹ , è°ƒç”¨æ­¤æ¥å£ , ä¼ å…¥æ­Œå• id, å¯ ä»¥è·å–å¯¹åº”æ­Œå•å†…çš„æ‰€æœ‰çš„éŸ³ä¹(æœªç™»å½•çŠ¶æ€åªèƒ½è·å–ä¸å®Œæ•´çš„æ­Œå•,ç™»å½•åæ˜¯å®Œæ•´çš„)ï¼Œä½†æ˜¯è¿”å›çš„trackIdsæ˜¯å®Œæ•´çš„ï¼Œtracks åˆ™æ˜¯ä¸å®Œæ•´çš„ï¼Œå¯æ‹¿å…¨éƒ¨ trackIds è¯·æ±‚ä¸€æ¬¡ `song/detail` æ¥å£è·å–æ‰€æœ‰æ­Œæ›²çš„è¯¦æƒ…

- å‚æ•°

|  å‚æ•°  |      ç±»å‹      | å«ä¹‰                             |
| :----: | :------------: | :------------------------------- |
| *`id`* |    `Number`    | æ­Œå•id                           |
|  `s`   | (å¯é€‰)`Number` | æ­Œå•æœ€è¿‘çš„`s`ä¸ªæ”¶è—è€…ï¼Œé»˜è®¤å€¼ä¸º8 |

###### æœ€æ–°éŸ³ä¹(æ–°æ­Œæ¦œ)

1. å…ˆè·å–[æ‰€æœ‰æ¦œå•](#æ‰€æœ‰æ¦œå•æ¥å£(`get`))ï¼Œä»æ‰€æœ‰æ¦œå•ä¸­æ‰¾åˆ°"æ–°æ­Œæ¦œ"çš„idã€‚(å®æµ‹idä¸º`3779629`)
2. å†é€šè¿‡[æ­Œå•è¯¦æƒ…](#æ­Œå•è¯¦æƒ…æ¥å£(`get`))è·å–æ¦œå•å†…å®¹ã€‚

> [!note]
>
> http://iwenwiki.com:3000/playlist/detail?id=3779629

> [!tip]
>
> å®˜æ–¹çš„æ¥å£ç¤ºä¾‹ï¼š
>
> https://interface.music.163.com/weapi/personalized/newsong

###### è·å–çƒ­æ­Œæ¦œ

1. å…ˆè·å–[æ‰€æœ‰æ¦œå•](#æ‰€æœ‰æ¦œå•æ¥å£(`get`))ï¼Œä»æ‰€æœ‰æ¦œå•ä¸­æ‰¾åˆ°"çƒ­æ­Œæ¦œ"çš„idã€‚(å®æµ‹idä¸º`3778678`)
2. å†é€šè¿‡[æ­Œå•è¯¦æƒ…](#æ­Œå•è¯¦æƒ…æ¥å£(`get`))è·å–æ¦œå•å†…å®¹ã€‚

> [!note]
>
> http://iwenwiki.com:3000/playlist/detail?id=3778678

###### çƒ­é—¨æœç´¢(`get`)

http://iwenwiki.com:3000/search/hot

###### æœç´¢å»ºè®®æ¥å£(`get`)

http://iwenwiki.com:3000/search/suggest (è‹¥éœ€è¦ä¿¡æ¯å¯å°†`search`æ›¿æ¢ä¸º`cloudsearch`)

- å‚æ•°

|     å‚æ•°     |      ç±»å‹      | å«ä¹‰                             |
| :----------: | :------------: | :------------------------------- |
| *`keywords`* |    `String`    | å…³é”®è¯                           |
|    `type`    | (å¯é€‰)`Number` | å¦‚æœä¼  'mobile' åˆ™è¿”å›ç§»åŠ¨ç«¯æ•°æ® |

###### æœç´¢æ¥å£(`get`)

http://iwenwiki.com:3000/search

http://iwenwiki.com:3000/cloudsearch (æ¨èï¼Œä¿¡æ¯æ›´å…¨)

- å‚æ•°

|     å‚æ•°     |      ç±»å‹      | å«ä¹‰                                                         |
| :----------: | :------------: | :----------------------------------------------------------- |
| *`keywords`* |    `String`    | å…³é”®è¯                                                       |
|   `limit`    | (å¯é€‰)`Number` | è¿”å›æ•°é‡ï¼Œé»˜è®¤ä¸º30                                           |
|   `offset`   | (å¯é€‰)`Number` | åç§»æ•°é‡ï¼Œç”¨äºåˆ†é¡µï¼Œé»˜è®¤ä¸º0                                  |
|    `type`    | (å¯é€‰)`Number` | æœç´¢ç±»å‹ï¼Œé»˜è®¤ä¸º 1 å³å•æ›² , <br />å–å€¼æ„ä¹‰ : 1: å•æ›², 10: ä¸“è¾‘, 100: æ­Œæ‰‹, 1000: æ­Œå•, 1002: ç”¨æˆ·, 1004: MV, 1006: æ­Œè¯, 1009: ç”µå°, 1014: è§†é¢‘, 1018:ç»¼åˆ |

###### éŸ³ä¹urlè·å–æ¥å£(`get`)

http://iwenwiki.com:3000/song/url

- å‚æ•°

|  å‚æ•°  |      ç±»å‹      | å«ä¹‰                                                         |
| :----: | :------------: | :----------------------------------------------------------- |
| *`id`* |    `Number`    | éŸ³ä¹ id                                                      |
|  `br`  | (å¯é€‰)`Number` | ç ç‡,é»˜è®¤è®¾ç½®äº† 999000 å³æœ€å¤§ç ç‡,å¦‚æœè¦ 320k åˆ™å¯è®¾ç½®ä¸º 320000,å…¶ä»–ç±»æ¨ |

>  [!tip]
>
> å®˜æ–¹æ’­æ”¾æ¥å£ç¤ºä¾‹ï¼š
>
> https://music.163.com/outchain/player?type=2&id=2015976648&auto=1&height=66&bg=e8e8e8

###### è·å–æ­Œæ›²ä¿¡æ¯æ¥å£(`get`)

http://iwenwiki.com:3000/song/detail

- è¯´æ˜ : è°ƒç”¨æ­¤æ¥å£ , ä¼ å…¥éŸ³ä¹ id(æ”¯æŒå¤šä¸ª id, ç”¨ `,` éš”å¼€), å¯è·å¾—æ­Œæ›²è¯¦æƒ…(æ³¨æ„:æ­Œæ›²å°é¢ç°åœ¨éœ€è¦é€šè¿‡ä¸“è¾‘å†…å®¹æ¥å£è·å–)

- å‚æ•°

|  å‚æ•°   |    ç±»å‹    | å«ä¹‰                     |
| :-----: | :--------: | :----------------------- |
| *`ids`* | `Number[]` | éŸ³ä¹ id ï¼Œå¦‚`ids=347230` |

- è°ƒç”¨ä¾‹å­ : `/song/detail?ids=347230`,`/song/detail?ids=347230,347231`

###### æ­Œè¯æ¥å£(`get`)

http://iwenwiki.com/lyric

- å‚æ•°

|  å‚æ•°  |   ç±»å‹   | å«ä¹‰    |
| :----: | :------: | :------ |
| *`id`* | `Number` | éŸ³ä¹ id |



[^ç½‘æ˜“äº‘éŸ³ä¹APIæ–‡æ¡£]:[ç½‘æ˜“äº‘éŸ³ä¹APIæ–‡æ¡£ (iwenwiki.com)](http://iwenwiki.com/NeteaseCloudMusicApi/)

# æ¥å£å‚æ•°ï¼ˆå‰åç«¯è”è°ƒï¼‰

1. æ¥å£æä¾›
   å…¬å¸çš„åç«¯ç¨‹åºå‘˜ï¼ˆjavaï¼‰
       http://192.168.xx.xx/xx/xxx/xx 

2. æ¥å£å‚æ•°

   1. æ¥å£æ–‡æ¡£è¯´æ˜ï¼š-- æœ¬åœ°çš„world  åœ¨çº¿çš„æ–‡æ¡£-postman 
      è¯·æ±‚çš„æ–¹å¼
      å‚æ•°ä¼ é€’
      å“åº”çš„æ•°æ® 

   2. æ²¡æœ‰æ¥å£æ–‡æ¡£ -- ç›´æ¥å‘é€æ¥å£åœ°å€ 

   3. é—®é¢˜

      è·å–æ¥å£æˆåŠŸå ä¸çŸ¥é“å‚æ•°å­—æ®µä»€ä¹ˆæ„æ€ 

# ç¬¬ä¸‰æ–¹ç»„ä»¶

## vue-aplayer éŸ³é¢‘æ’­æ”¾ç»„ä»¶[^vue-aplayer]

> [!note]
>
> å®˜ç½‘ï¼š[vue-aplayer](https://aplayer.netlify.app/docs/)
>
> æ–‡æ¡£ï¼š[å…¥é—¨ | vue-aplayer](https://aplayer.netlify.app/docs/guide/)

### å®‰è£…[^å…¥é—¨ | vue-aplayer]

###### ä½¿ç”¨ npm

```bash
npm install @moefe/vue-aplayer --save
```

###### ä½¿ç”¨ yarn *`æ¨è`*

```bash
yarn add @moefe/vue-aplayer
```

æ¨èä½¿ç”¨ yarn å®‰è£…å¹¶æäº¤ yarn.lock é”å®šç‰ˆæœ¬å·

### å¿«é€Ÿå¼€å§‹

#### ä¼ ç»Ÿæ–¹å¼

ğŸ“ index.html

```html
<html>
  <body>
    <!-- prettier-ignore -->
    <div id="app">
      <a-player :audio="audio" :lrc-type="3"></a-player>
    </div>
  </body>
  <!-- ä½ å¿…é¡»åœ¨å¼•å…¥ vue-aplayer ä¹‹å‰å¼•å…¥ vue -->
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="https://cdn.jsdelivr.net/npm/@moefe/vue-aplayer"></script>
  <script>
    Vue.use(VueAPlayer, {
      defaultCover: 'https://github.com/u3u.png',
      productionTip: true,
    });

    new Vue({
      el: '#app',
      data: {
        audio: {
          name: 'ä¸œè¥¿ï¼ˆCoverï¼šæ—ä¿Šå‘ˆï¼‰',
          artist: 'çº³è±†',
          url: 'https://cdn.moefe.org/music/mp3/thing.mp3',
          cover: 'https://p1.music.126.net/5zs7IvmLv7KahY3BFzUmrg==/109951163635241613.jpg?param=300y300', // prettier-ignore
          lrc: 'https://cdn.moefe.org/music/lrc/thing.lrc',
        },
      },
    });
  </script>
</html>
```

#### å•æ–‡ä»¶ç»„ä»¶

ğŸ“ main.js

```js
import Vue from 'vue';
import APlayer from '@moefe/vue-aplayer';

Vue.use(APlayer, {
  defaultCover: 'https://github.com/u3u.png',
  productionTip: true,
});
```

ğŸ“ app.vue

```vue
<!-- prettier-ignore -->
<template>
  <div id="app">
    <aplayer :audio="audio" :lrcType="3" />
  </div>
</template>

<script>
export default {
  data() {
    return {
      audio: {
        name: 'ä¸œè¥¿ï¼ˆCoverï¼šæ—ä¿Šå‘ˆï¼‰',
        artist: 'çº³è±†',
        url: 'https://cdn.moefe.org/music/mp3/thing.mp3',
        cover: 'https://p1.music.126.net/5zs7IvmLv7KahY3BFzUmrg==/109951163635241613.jpg?param=300y300', // prettier-ignore
        lrc: 'https://cdn.moefe.org/music/lrc/thing.lrc',
      },
    };
  },
};
</script>
```

> [!warning]
>
> è¿™ç§æ–¹å¼æ˜¯å®˜æ–¹æ¨èçš„ï¼Œä¹Ÿæ˜¯å¤§å®¶ç†ŸçŸ¥çš„ä½¿ç”¨æœ€å¤šã€ä¸Šæ‰‹æœ€å¿«çš„ã€‚ä½†æ˜¯å¼€å‘ä½“éªŒä¸æ˜¯å¾ˆå‹å¥½ã€‚
> è™½ç„¶å®˜æ–¹æä¾›äº† [Vetur](https://github.com/vuejs/vetur) æ‰©å±•æ¥å¼ºåŒ–å¼€å‘ä½“éªŒï¼Œä½†ä¾ç„¶æ— æ³•åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š
>
> 1. ~~ç›®å‰ Prettier è¿˜ä¸æ”¯æŒæ ¼å¼åŒ–æ¨¡ç‰ˆéƒ¨åˆ†[ï¼ˆæ­£åœ¨è¿›è¡Œä¸­ï¼‰](https://github.com/prettier/prettier/pull/4753)~~
> 2. æ¨¡ç‰ˆéƒ¨åˆ†æ²¡æœ‰å¼ºå¤§çš„æ™ºèƒ½æ„ŸçŸ¥åŠŸèƒ½
> 3. å¯¹ TypeScript ä¸å‹å¥½
> 4. æ— æ³•æ‰¹é‡ä¼ é€’ `props`
> 5. ä¸èƒ½ä½¿ç”¨ HTML å†…ç½®æ ‡ç­¾å

#### vue-class-component *`æ¨è`*

å¦‚æœä½ ç†Ÿæ‚‰ Reactï¼Œæˆ–æ˜¯ JSX çˆ±å¥½è€…ï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚
ä½ ä¾ç„¶å¯ä»¥ä½¿ç”¨ `@Component` è£…é¥°å™¨ä»¥ä¼ ç»Ÿæ–¹å¼ä¼ é€’ç»„ä»¶çš„å±æ€§ï¼Œä½†æˆ‘ä¸æ¨èè¿™ä¹ˆåšã€‚

###### JavaScript

> [!tip]
>
> `@vue/cli` 3.0 é»˜è®¤é…ç½®äº† [JSX é¢„è®¾](https://github.com/vuejs/vue-cli/tree/dev/packages/@vue/babel-preset-app)ï¼Œæ‰€ä»¥ä½ æ— éœ€åšä»»ä½•é¢å¤–çš„é…ç½®ã€‚
> å®‰è£… [vue-tsx-support](https://github.com/wonderful-panda/vue-tsx-support#install-and-enable) å¹¶é…ç½® [jsconfig.json](https://code.visualstudio.com/docs/languages/jsconfig) å’Œ [vue-jsx-hot-loader](https://github.com/skyrpex/vue-jsx-hot-loader) è·å¾—æœ€ä½³å¼€å‘ä½“éªŒã€‚

ğŸ“ main.js

```js
import Vue from 'vue';
import APlayer from '@moefe/vue-aplayer';

Vue.use(APlayer, {
  defaultCover: 'https://github.com/u3u.png',
  productionTip: true,
});
```

ğŸ“ app.js

```jsx
import Vue from 'vue';
import Component from 'vue-class-component';
import { APlayer } from '@moefe/vue-aplayer';

@Component
export default class App extends Vue {
  audio = {
    name: 'ä¸œè¥¿ï¼ˆCoverï¼šæ—ä¿Šå‘ˆï¼‰',
    artist: 'çº³è±†',
    url: 'https://cdn.moefe.org/music/mp3/thing.mp3',
    cover: 'https://p1.music.126.net/5zs7IvmLv7KahY3BFzUmrg==/109951163635241613.jpg?param=300y300', // prettier-ignore
    lrc: 'https://cdn.moefe.org/music/lrc/thing.lrc',
  };

  render() {
    return (
      <div id="app">
        <APlayer audio={this.audio} lrcType={3} />
      </div>
    );
  }
}
```

###### TypeScript *`æ¨è`*

> [!CAUTION]
>
> TypeScript ç”¨æˆ·å¿…é¡»å®‰è£… [vue-tsx-support](https://github.com/wonderful-panda/vue-tsx-support#install-and-enable) å¹¶é…ç½® [tsconfig.json](https://www.tslang.cn/docs/handbook/tsconfig-json.html)
> åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥é…ç½® [vue-jsx-hot-loader](https://github.com/skyrpex/vue-jsx-hot-loader) è·å¾—æœ€ä½³å¼€å‘ä½“éªŒã€‚

main.ts

```ts
import Vue from 'vue';
import APlayer from '@moefe/vue-aplayer';

Vue.use<APlayer.InstallOptions>(APlayer, {
  defaultCover: 'https://github.com/u3u.png',
  productionTip: true,
});
```

ğŸ“ app.tsx

```tsx
import Vue from 'vue';
import Comopnent from 'vue-class-component';
import { APlayer } from '@moefe/vue-aplayer';

@Comopnent
export default class App extends Vue {
  private audio: APlayer.Audio | APlayer.Audio[] = {
    name: 'ä¸œè¥¿ï¼ˆCoverï¼šæ—ä¿Šå‘ˆï¼‰',
    artist: 'çº³è±†',
    url: 'https://cdn.moefe.org/music/mp3/thing.mp3',
    cover: 'https://p1.music.126.net/5zs7IvmLv7KahY3BFzUmrg==/109951163635241613.jpg?param=300y300', // prettier-ignore
    lrc: 'https://cdn.moefe.org/music/lrc/thing.lrc',
  };

  render() {
    return (
      <div id="app">
        <APlayer audio={this.audio} lrcType={3} />
      </div>
    );
  }
}
```

### é€‰é¡¹è¯´æ˜[^é€‰é¡¹ | vue-aplayer]

###### fixed `å¯é€‰`

- **ç±»å‹**ï¼š`boolean?`
- **é»˜è®¤å€¼**ï¼š`false`
- **æè¿°**ï¼šæ˜¯å¦å¼€å¯å¸åº•æ¨¡å¼

###### mini `å¯é€‰`

> [!tip]
>
> å¦‚æœå¼€å¯å¸åº•æ¨¡å¼ï¼Œè¯¥é€‰é¡¹å¯ä»¥æ§åˆ¶æ’­æ”¾å™¨å±•å¼€æˆ–æ”¶èµ·

- **ç±»å‹**ï¼š`boolean?`
- **é»˜è®¤å€¼**ï¼š`false`
- **æè¿°**ï¼šæ˜¯å¦å¼€å¯è¿·ä½ æ¨¡å¼

###### autoplay `å¯é€‰`

> [!warning]
>
> ç”±äºå¤§å¤šæ•°ç§»åŠ¨ç«¯æµè§ˆå™¨ç¦æ­¢äº†éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾ï¼Œæ‰€ä»¥è¯¥é€‰é¡¹åœ¨ç§»åŠ¨ç«¯æ— æ•ˆ

- **ç±»å‹**ï¼š`boolean?`
- **é»˜è®¤å€¼**ï¼š`false`
- **æè¿°**ï¼šæ˜¯å¦å¼€å¯è‡ªåŠ¨æ’­æ”¾

###### theme `å¯é€‰`

> [!tip]
>
> ä½ å¯ä»¥é€‰æ‹©å¼•å…¥ [color-thief](https://cdn.jsdelivr.net/npm/colorthief@2.0.2/dist/) è®©æ’­æ”¾å™¨æ ¹æ®å°é¢å›¾ç‰‡è‡ªåŠ¨è·å–ä¸»é¢˜é¢œè‰²

- **ç±»å‹**ï¼š`string?`
- **é»˜è®¤å€¼**ï¼š`#b7daff`
- **æè¿°**ï¼šè®¾ç½®æ’­æ”¾å™¨é»˜è®¤ä¸»é¢˜é¢œè‰²

###### loop `å¯é€‰`

> [!warning]
>
> ç”±äºæ’­æ”¾å™¨ä¼šä¿å­˜ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæ‰€ä»¥æ’­æ”¾å™¨é¦–æ¬¡åˆå§‹åŒ–ä¹‹åè¯¥é€‰é¡¹å°†å¤±æ•ˆ

- **ç±»å‹**ï¼š`APlayer.LoopMode?`
- **é»˜è®¤å€¼**ï¼š`all`
- **æè¿°**ï¼šè®¾ç½®æ’­æ”¾å™¨çš„åˆå§‹å¾ªç¯æ¨¡å¼

```ts
declare namespace APlayer {
  export type LoopMode = 'all' | 'one' | 'none';
}
```

###### order `å¯é€‰`

> [!warning]
>
> ç”±äºæ’­æ”¾å™¨ä¼šä¿å­˜ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæ‰€ä»¥æ’­æ”¾å™¨é¦–æ¬¡åˆå§‹åŒ–ä¹‹åè¯¥é€‰é¡¹å°†å¤±æ•ˆ

- **ç±»å‹**ï¼š`APlayer.OrderMode?`
- **é»˜è®¤å€¼**ï¼š`list`
- **æè¿°**ï¼šè®¾ç½®æ’­æ”¾å™¨çš„åˆå§‹é¡ºåºæ¨¡å¼

```ts
declare namespace APlayer {
  export type OrderMode = 'list' | 'random';
}
```

###### preload `å¯é€‰`

- **ç±»å‹**ï¼š`APlayer.Preload?`
- **é»˜è®¤å€¼**ï¼š`auto`
- **æè¿°**ï¼šè®¾ç½®éŸ³é¢‘çš„é¢„åŠ è½½æ¨¡å¼

```ts
declare namespace APlayer {
  export type Preload = 'none' | 'metadata' | 'auto';
}
```

###### volume `å¯é€‰`

- **ç±»å‹**ï¼š`number?`
- **é»˜è®¤å€¼**ï¼š`0.7`
- **æè¿°**ï¼šè®¾ç½®æ’­æ”¾å™¨çš„éŸ³é‡

###### audio *`å¿…å¡«`*_~Rd~_

- **ç±»å‹**ï¼š`APlayer.Audio | Array<APlayer.Audio>`
- **é»˜è®¤å€¼**ï¼š`undefined`
- **æè¿°**ï¼šè®¾ç½®è¦æ’­æ”¾çš„éŸ³é¢‘å¯¹è±¡æˆ–æ’­æ”¾åˆ—è¡¨

```ts
declare namespace APlayer {
  export type AudioType = 'auto' | 'hls' | 'normal';
  export interface Audio {
    id?: number; // éŸ³é¢‘ id
    name: string | VNode; // éŸ³é¢‘åç§°
    artist: string | VNode; // éŸ³é¢‘è‰ºæœ¯å®¶
    url: string; // éŸ³é¢‘æ’­æ”¾åœ°å€
    cover: string; // éŸ³é¢‘å°é¢
    lrc?: string; // lrc æ­Œè¯
    theme?: string; // å•æ›²ä¸»é¢˜è‰²ï¼Œå®ƒå°†è¦†ç›–å…¨å±€çš„é»˜è®¤ä¸»é¢˜è‰²
    type?: AudioType; // æŒ‡å®šéŸ³é¢‘çš„ç±»å‹
    speed?: number; // å•æ›²æ’­æ”¾é€Ÿåº¦
  }
}
```

è¿™é‡Œä¸ [APlayer](https://github.com/MoePlayer/APlayer) ä¸åŒçš„æ˜¯æ–°å¢äº† `id` å’Œ `speed` å±æ€§ã€‚
`id` é»˜è®¤æƒ…å†µä¸‹ç”±æ’­æ”¾å™¨è‡ªåŠ¨ç”Ÿæˆï¼Œä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¼ ä¸€ä¸ª `id` æ¥è¦†ç›–å®ƒã€‚
`speed` å±æ€§å¯ä»¥æŒ‡å®šè¯¥éŸ³é¢‘çš„æ’­æ”¾é€Ÿåº¦ã€‚

> [!warning]
>
> `id` æ˜¯ç”¨æ¥åŒºåˆ†éŸ³é¢‘çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸å…è®¸é‡å¤ï¼Œå¦‚æœå‡ºç°é‡å¤å¯èƒ½ä¼šå¯¼è‡´æ’­æ”¾å™¨å‡ºç°å¼‚å¸¸ã€‚
> é»˜è®¤æƒ…å†µä¸‹ `id` æ˜¯æ ¹æ®æ’­æ”¾åˆ—è¡¨çš„ç´¢å¼•ç”Ÿæˆï¼Œå½“æ’­æ”¾åˆ—è¡¨å‘ç”Ÿå˜åŒ–æ—¶ (æ–°å¢/åˆ é™¤) ä¼šé‡æ–°ç”Ÿæˆã€‚
> å½“ä½ ä»æ’­æ”¾åˆ—è¡¨ä¸­åˆ é™¤éŸ³é¢‘æ—¶ï¼Œç”±äºæ’­æ”¾åˆ—è¡¨å‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´å½“å‰éŸ³é¢‘çš„ `id` ä¸åˆ é™¤åçš„æ’­æ”¾åˆ—è¡¨ä¸åŒ¹é…ã€‚ å‡ºç°è¿™ç§æƒ…å†µæ—¶ï¼Œä¼šé™çº§æ ¹æ® `url` æ›´æ–°å½“å‰éŸ³é¢‘çš„ä¿¡æ¯ï¼Œå¦‚æœæ’­æ”¾åˆ—è¡¨ä¸­æ¯ä¸€é¡¹çš„ `url` éƒ½æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆä¸ä¼šæœ‰é—®é¢˜ã€‚ å¦‚æœæœ‰é‡å¤çš„ `url`ï¼Œä½ å¿…é¡»è®¾ç½®éŸ³é¢‘çš„ `id` å±æ€§ï¼Œä»¥ç¡®ä¿æ¯ä¸€é¡¹éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™æ’­æ”¾å™¨å¯èƒ½å‡ºç°å¼‚å¸¸ã€‚

###### customAudioType `å¯é€‰`

- **ç±»å‹**ï¼š`{ [index: string]: Function }?`
- **é»˜è®¤å€¼**ï¼š`undefined`
- **æè¿°**ï¼šè‡ªå®šä¹‰éŸ³é¢‘ç±»å‹

ğŸ“ [example.vue](https://aplayer.netlify.app/docs/guide/hls.html)

```vue
<template>
  <aplayer :audio="audio" :customAudioType="customAudioType" :lrcType="3" />
</template>

<script>
import Vue from 'vue';
import APlayer from '@moefe/vue-aplayer';

Vue.use(APlayer);

export default {
  data() {
    return {
      audio: {
        name: 'Let It Go.m3u8',
        artist: 'Idina Menzel',
        url: 'https://cdn.moefe.org/music/hls/frozen.m3u8',
        cover: 'https://p1.music.126.net/n72JJkPg2-ENxhB-DsZ2AA==/109951163115400390.jpg?param=300y300', // prettier-ignore
        lrc: 'https://cdn.moefe.org/music/lrc/frozen.lrc',
        type: 'customHls',
      },
      customAudioType: {
        customHls(audioElement, audio, player) {
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(audio.url);
            hls.attachMedia(audioElement);
          } else if (
            audioElement.canPlayType('application/x-mpegURL') ||
            audioElement.canPlayType('application/vnd.apple.mpegURL')
          ) {
            audioElement.src = audio.url;
          } else {
            player.showNotice('Error: HLS is not supported.');
          }
        },
      },
    };
  },
};
</script>
```

###### mutex `å¯é€‰`

- **ç±»å‹**ï¼š`boolean?`
- **é»˜è®¤å€¼**ï¼š`true`
- **æè¿°**ï¼šæ˜¯å¦å¼€å¯äº’æ–¥æ¨¡å¼

å¦‚æœå¼€å¯åˆ™ä¼šé˜»æ­¢å¤šä¸ªæ’­æ”¾å™¨åŒæ—¶æ’­æ”¾ï¼Œå½“å‰æ’­æ”¾å™¨æ’­æ”¾æ—¶æš‚åœå…¶ä»–æ’­æ”¾å™¨

###### lrcType å¯é€‰

- **ç±»å‹**ï¼š`APlayer.LrcType?`
- **é»˜è®¤å€¼**ï¼š`0`
- **æè¿°**ï¼šè®¾ç½® lrc æ­Œè¯è§£ææ¨¡å¼

```ts
declare namespace APlayer {
  export enum LrcType {
    file = 3, // è¡¨ç¤º audio.lrc çš„å€¼æ˜¯ lrc æ–‡ä»¶åœ°å€ï¼Œå°†é€šè¿‡ `fetch` è·å– lrc æ­Œè¯æ–‡æœ¬
    html = 2, // ä¸æ”¯æŒ html ç”¨æ³•
    string = 1, // è¡¨ç¤º audio.lrc çš„å€¼æ˜¯ lrc æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå°†ç›´æ¥é€šè¿‡å®ƒè§£ææ­Œè¯
    disabled = 0, // ç¦ç”¨ lrc æ­Œè¯
  }
}
```

###### listFolded `å¯é€‰`

> [!warning]
>
> ç”±äºæ’­æ”¾å™¨ä¼šä¿å­˜ç”¨æˆ·çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæ‰€ä»¥æ’­æ”¾å™¨é¦–æ¬¡åˆå§‹åŒ–ä¹‹åè¯¥é€‰é¡¹å°†å¤±æ•ˆ

- **ç±»å‹**ï¼š`boolean?`
- **é»˜è®¤å€¼**ï¼š`false`
- **æè¿°**ï¼šæ˜¯å¦æŠ˜å æ’­æ”¾åˆ—è¡¨

###### listMaxHeight `å¯é€‰`

- **ç±»å‹**ï¼š`number?`
- **é»˜è®¤å€¼**ï¼š`250`
- **æè¿°**ï¼šè®¾ç½®æ’­æ”¾åˆ—è¡¨æœ€å¤§é«˜åº¦ï¼Œå•ä½ä¸ºåƒç´ 

###### storageName `å¯é€‰`

- **ç±»å‹**ï¼š`string?`
- **é»˜è®¤å€¼**ï¼š`aplayer-setting`
- **æè¿°**ï¼šè®¾ç½®å­˜å‚¨æ’­æ”¾å™¨è®¾ç½®çš„ `localStorage` key

è¿™é‡Œä¸ [APlayer](https://github.com/MoePlayer/APlayer) æœ‰æ‰€ä¸åŒï¼Œåœ¨ `localStorage` ä¸­ä¿å­˜çš„æ˜¯å¯¹è±¡æ•°ç»„
ä¸åŒçš„å®ä¾‹ä¹‹é—´äº’ä¸å½±å“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸éœ€è¦ä¿®æ”¹æ­¤é¡¹ã€‚

```ts
declare namespace APlayer {
  export type LoopMode = 'all' | 'one' | 'none';
  export type OrderMode = 'list' | 'random';
  export interface Settings {
    currentTime: number; // å½“å‰éŸ³é¢‘çš„æ’­æ”¾æ—¶é—´
    duration: number | null; // å½“å‰éŸ³é¢‘çš„é•¿åº¦
    paused: boolean; // å½“å‰æ’­æ”¾å™¨æ˜¯å¦æš‚åœ
    mini: boolean; // æ˜¯å¦æ˜¯ mini æ¨¡å¼
    lrc: boolean; // å½“å‰æ­Œè¯
    list: boolean; // å½“å‰åˆ—è¡¨æ˜¯å¦å±•å¼€
    volume: number; // å½“å‰æ’­æ”¾å™¨éŸ³é‡
    loop: LoopMode; // å½“å‰å¾ªç¯æ¨¡å¼
    order: OrderMode; // å½“å‰é¡ºåºæ¨¡å¼
    music: Audio | null; // å½“å‰æ’­æ”¾çš„éŸ³é¢‘å¯¹è±¡
  }
}
```

```js
// ä½ å¯ä»¥ä½¿ç”¨å®ä¾‹çš„ `currentSettings` å±æ€§è·å–å½“å‰å®ä¾‹çš„æ’­æ”¾å™¨è®¾ç½®
console.log(this.$refs.aplayer.currentSettings);
```

# color thief å›¾ç‰‡é¢œè‰²èšåˆå™¨

`colorthief`æ˜¯åŸºäºJavaScriptå’Œcanvasæ¥ç”¨äºæå–å›¾ç‰‡çš„ä¸»è¦é¢œè‰²æˆ–è€…ä»£è¡¨æ€§é¢œè‰²è°ƒè‰²æ¿çš„å·¥å…·ï¼š[å®˜ç½‘ä¼ é€é—¨](https://lokeshdhakar.com/projects/color-thief/)

é¦–å…ˆåœ¨é¡¹ç›®é‡Œï¼Œä½¿ç”¨npmå®‰è£…ä¸€ä¸‹colorthiefçš„ä¾èµ–ã€‚

```bash
npm i --save colorthief 
```

è¿™ä¸ªæ’ä»¶ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œå…¶ä½¿ç”¨æ­¥éª¤æ—¶ï¼š

1. é¦–å…ˆåœ¨vueçš„`template`ç»“æ„ä¸­ï¼Œå®šä¹‰ä¸€ä¸ª`img`æ ‡ç­¾ï¼Œç”¨æ¥å­˜æ”¾ä¸Šä¼ çš„å›¾ç‰‡ï¼Œæœ¬ä¾‹ä¸­ç›´æ¥ä½¿ç”¨`:src`ç»‘å®šä¸€ä¸ª`bannerimg`çš„`url`åœ°å€ã€‚åœ¨`img`æ ‡ç­¾ä¸Šï¼Œæ·»åŠ `@load`äº‹ä»¶`loadImage`ã€‚
2. åœ¨`script`ä¸­ä½¿ç”¨`import`æ–¹æ³•å¯¼å…¥`colorthief`æ’ä»¶ã€‚
3. `loadImage`æ–¹æ³•ä¸­ï¼Œé¦–å…ˆç”¨`document.querySelector`æ–¹æ³•ï¼Œæ‹¿åˆ°`img`çš„`DOM`ã€‚
4. å®ä¾‹åŒ–`ColorThief`å¯¹è±¡ï¼Œä½¿ç”¨`colorthief.getPalette(domImg)[0]`ï¼Œå³å¯è·å–åˆ°å›¾ç‰‡çš„ä¸»è‰²è°ƒï¼Œä¸»è‰²è°ƒä¼šä»¥ä¸€ä¸ªçº¢è‰²ã€ç»¿è‰²å’Œè“è‰²å€¼çš„ä¸‰ä¸ªæ•´æ•°çš„æ•°ç»„è¿”å›ã€‚
5. å°†`rgb`çš„æ•°ç»„é€šè¿‡å‡½æ•°ï¼Œè½¬æ¢æˆ16è¿›åˆ¶é¢œè‰²ä»£ç ï¼›
6. æ¯”è¾ƒé¢œè‰²ä»£ç ä¸ç»¿è‰²åŸºå‡†ä»£ç æ˜¯å¦ç›¸è¿‘ï¼Œç›¸è¿‘çš„è¯ï¼Œåˆ™è¯´æ˜å¥åº·ç æ­£å¸¸ã€‚

ä»¥ä¸‹æ˜¯è·å–ä¸»è‰²è°ƒçš„ä»£ç ï¼š

```vue
<template>
     <div class="bannerd">
         <div class="bannerview">
             <img id="code" class="imgbg" :src="bannerimg" @load="loadImage" alt="" />
         </div>
     </div>
 </template>
 
 <script>
     //npm i --save colorthief
     import ColorThief from "colorthief";
     export default {
         name: "bannerdemo",
         data() {
             return {
                 bannerimg: require("./assets/11.png"),
             }
         },
         methods: {
             onChange(index) {
                 this.bannerimg = this.bigimglist[index].img;
             },
             loadImage() {
                 let domImg = document.querySelector('#code');
                 let colorthief = new ColorThief();
                 this.bacolor = colorthief.getPalette(domImg)[0];
                 console.log(this.bacolor); //ä¸»é¢œè‰²
             },
         }
     }
 </script>
```



[^vue-aplayer]:[vue-aplayer](https://aplayer.netlify.app/docs/)
[^å…¥é—¨ | vue-aplayer]:[å…¥é—¨ | vue-aplayer](https://aplayer.netlify.app/docs/guide/)
[^é€‰é¡¹ | vue-aplayer]:[é€‰é¡¹ | vue-aplayer](https://aplayer.netlify.app/docs/guide/options.html#fixed)

---

# The End
